# CitrusKDS - 廚房顯示系統

## 專案概述

CitrusKDS是一個專為餐飲業設計的廚房顯示系統(Kitchen Display System)，旨在優化餐廳後廚工作流程，提高訂單處理效率。該應用使用現代Android技術棧開發，提供直觀的用戶界面，幫助廚房人員實時追蹤、管理和完成訂單。

## 主要功能

- **實時訂單顯示**：以網格形式清晰展示所有待處理訂單
- **訂單狀態管理**：支持多種訂單狀態（準備中、已完成、已取餐等）
- **訂單詳情查看**：可查看訂單的詳細信息和菜品列表
- **實時時鐘顯示**：界面頂部顯示當前日期和時間
- **無數據狀態處理**：當沒有訂單時顯示友好的提示動畫
- **列印支持**：集成Epson印表機支持，可列印訂單信息

## API功能介紹

系統提供以下API接口，支持與餐廳POS系統的無縫集成：

### 訂單管理API
- **獲取訂單列表** `/KDS/OrdersList`：根據KDS ID和訂單狀態獲取訂單列表
  - 請求參數：`KDS_ID`、`OrderStatus`
  - 響應數據：訂單列表，包含訂單號、下單時間、服務類型、狀態和菜品詳情
  
- **更新訂單狀態** `/KDS/SetOrderStatus`：更新指定訂單的處理狀態
  - 請求參數：`OrderNo`、`Status`、`KDS_ID`
  - 響應數據：操作結果代碼

- **獲取訂單準備信息** `/controller/OrdersList`：獲取訂單準備狀態信息
  - 響應數據：訂單名稱和訂單號列表

### 庫存管理API
- **獲取庫存信息** `/KDS/InventoryList`：獲取所有菜品的庫存信息
  - 響應數據：庫存信息列表，包含菜品ID、名稱、類別和銷售狀態
  
- **設置庫存數量** `/KDS/SetInventory`：更新指定菜品的庫存數量
  - 請求參數：`GID`(菜品ID)、`GKID`(菜品類別ID)、`Stock`(庫存數量)
  - 響應數據：操作結果代碼

- **設置菜品銷售狀態** `/KDS/SetSellStatus`：更新菜品的銷售狀態（可售/售罄）
  - 請求參數：`StoreNo`、`GKID`、`GID`、`Gname`、`Status`、`Size`
  - 響應數據：操作結果代碼

### 遠程通知API
- **訂單通知** `KDS/OrdersNotify`：向服務器發送訂單狀態變更通知 (推播)
  - 請求參數：`StoreNo`(餐廳編號)、`OrderNo`(訂單號)
  - 響應數據：操作結果代碼

- **遠程銷售狀態同步** `KDS/SetSellStatus`：向服務器同步菜品銷售狀態
  - 請求參數：與本地設置菜品銷售狀態相同
  - 響應數據：操作結果代碼

所有API均使用POST方法，數據交換格式為JSON。API請求需要包含ApiKey進行身份驗證，響應數據統一包含狀態碼和數據或錯誤信息。本地API通過設備IP地址訪問，遠程API通過中央服務器訪問。

## 技術棧

- **開發語言**：Kotlin
- **UI框架**：Jetpack Compose
- **架構模式**：MVVM（Model-View-ViewModel）
- **依賴注入**：Dagger Hilt
- **網絡通信**：Retrofit2, Ktor Client
- **JSON解析**：Moshi
- **動畫效果**：Lottie
- **日誌工具**：Timber
- **圖片加載**：Coil

## 系統要求

- Android 7.0 (API 24) 或更高版本
- 建議使用平板設備以獲得最佳顯示效果

## 安裝說明

1. 從發布頁面下載最新的APK文件
2. 在Android設備上安裝APK
3. 首次啟動時，配置系統參數（KDS ID、餐廳編號、IP地址等）

## 配置說明

應用首次啟動時需要配置以下參數：

- **KDS ID**：廚房顯示系統唯一標識
- **餐廳編號(RSNO)**：餐廳識別碼
- **本地IP**：設備IP地址
- **語言設置**：界面顯示語言
- **菜品顯示語言**：菜品信息顯示語言
- **印表機設置**：配置連接的印表機信息

## 使用指南

### 主界面

主界面以網格形式顯示所有當前訂單，每個訂單卡片包含：
- 訂單號
- 下單時間
- 菜品數量
- 當前狀態
- 操作按鈕

### 訂單操作

- 點擊"準備"按鈕開始處理訂單
- 訂單處理中狀態顯示進度指示器
- 完成訂單後點擊"已完成"按鈕
- 點擊訂單卡片可查看訂單詳情

## 開發者信息

本應用由Citrus團隊開發維護。

## 版本歷史

- **v1.1.1** (當前版本)
  - 功能優化和bug修復

## 許可證

© 2023-2024 Citrus. 保留所有權利。 